%% -*- erlang -*-
{minimum_otp_vsn, "22.0"}.

{cover_enabled, true}.
{erl_opts, [warnings_as_errors,
            debug_info]}.
{eunit_opts, [verbose]}.

{xref_checks, []}.
{xref_queries, [{"(XC - UC) || (XU - X - B)", []}]}.

{deps,
 [{riak_kv, {git, "https://github.com/basho/riak_kv.git", {branch, "develop"}}},
  {kvc, {git, "https://github.com/etrepum/kvc.git", {tag, "v1.5.0"}}},
  {ibrowse, {git, "https://github.com/basho/ibrowse.git", {branch, "develop-3.0"}}},
  {fuse, {git, "https://github.com/jlouis/fuse.git", {tag, "v2.1.0"}}},

  %% it's here becase of compile-riak-test
  {riakc, {git, "https://github.com/basho/riak-erlang-client", {branch, "develop-3.0"}}},
  {basho_bench, {git, "https://github.com/TI-Tokyo/basho_bench.git", {branch, "develop-3.0"}}}
 ]
}.

{pre_hooks,
 [{compile, "./tools/grab-solr.sh"},
  {compile, "./tools/build-jar.sh"},
  {compile, "./tools/copy-jars.sh"}
 ]
}.

{extra_src_dirs,
 ["riak_test/", "misc/bench/src/"
 ]
}.

{profiles,
 [{test,
   [{deps, [meck]},
    {erl_opts, [nowarn_export_all]}
   ]
  },
  {eqc,
   [{deps, [meck]},
    {erl_opts, [nowarn_export_all]}
   ]
  }
 ]
}.
